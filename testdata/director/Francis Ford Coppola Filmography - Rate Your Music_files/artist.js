var RYMartistPage={expandedIssues:{},expandedIssuesRequests:{},expandedRoles:{},expandedRolesRequests:{},searchTimer:null,pendingSearchRequest:null,artist_id:null,RYMartistPage:"",tempMultiSort:null,discoSection:"music",expandIssues:function(s){var e=RYMartistPage.expandedIssues[s]||"unknown";e=="unknown"?(e="loading",$("#issues_"+s).html('<div class="loading_issues"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),RYMartistPage.expandedIssuesRequests[s]=rym.request.post("ExpandDiscographyIssues",{album_id:s},null,"script")):e=="loaded"&&!$("#issues_"+s).is(":visible")?$("#issues_"+s).slideDown(200):($("#issues_"+s).slideUp(200),RYMartistPage.expandedIssuesRequests[s]&&(RYMartistPage.expandedIssuesRequests[s].abort(),RYMartistPage.expandedIssuesRequests[s]=null,e="unknown"),e!="loaded"&&(e="unknown")),RYMartistPage.expandedIssues[s]=e},expandCreditRole:function(s,e){var i=RYMartistPage.expandedRoles[e]||"unknown";i=="unknown"?(i="loading",$("#credits_role_"+e).html('<div class="loading_issues"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),RYMartistPage.expandedRolesRequests[e]=rym.request.post("ExpandCreditRoleIssues",{artist_id:s,role_id:e},null,"script")):i=="loaded"&&!$("#credits_role_"+e).is(":visible")?$("#credits_role_"+e).slideDown(200):($("#credits_role_"+e).slideUp(200),RYMartistPage.expandedRolesRequests[e]&&(RYMartistPage.expandedRolesRequests[e].abort(),RYMartistPage.expandedRolesRequests[e]=null,i="unknown"),i!="loaded"&&(i="unknown")),RYMartistPage.expandedRoles[e]=i},_expandIssuesCallback:function(s,e){RYMartistPage.expandedIssues[s]="loaded";var i=$("#issues_"+s);i.html(e),i.find(".has_tip").tipTip()},_expandCreditRoleCallback:function(s,e){RYMartistPage.expandedIssues[s]="loaded";var i=$("#credits_role_"+s);i.html(e),i.find(".has_tip").tipTip(),refreshLazyLoadList()},applySearchFilters:function(s){RYMartistPage.searchTimer&&(clearTimeout(RYMartistPage.searchTimer),RYMartistPage.searchTimer=null),RYMartistPage.searchTimer=setTimeout("RYMartistPage._doSearch("+s+")",300),$("#disco_search").val().length==0?$("#disco_remove").hide():$("#disco_remove").show()},sortDiscography:function(s){$("#disco_sort").val(s),$("#disco_sort_chosen").text($("#disco_sort_"+s).text()),RYMartistPage.applySearchFilters(!0)},expandDiscographySection:function(s){$("#disco_header_"+s)[0].scrollIntoView({behavior:"smooth"});var e=$("#disco_type_"+s),i=e.outerHeight();e.css("min-height",i+"px"),e.html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200);var a=$("#disco_show_appearances").is(":checked"),t=$("#disco_sort").val();rym.request.post("ExpandDiscographySection",{artist_id:RYMartistPage.artist_id,sort:t,show_appearances:a,type:s,artist_key:RYMartistPage.artist_key})},_expandDiscographySectionCallback:function(s,e){$("#disco_type_"+s).html(e),refreshLazyLoadList(),$("#disco_header_"+s)[0].scrollIntoView({behavior:"smooth"})},_doSearch:function(s){var e=$("#disco_search").val(),i=$("#disco_show_appearances").is(":checked"),a=$("#disco_sort").val()||"release_date.a,title.a";RYMartistPage.discoSection=="music"?s?($("#discography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),RYMartistPage.pendingSearchRequest=rym.request.post("FilterDiscography",{artist_id:RYMartistPage.artist_id,sort:a,searchterm:e,show_appearances:i})):RYMartistPage.lastTerm!=e&&(e.length>0&&(i=!0),$("#discography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),RYMartistPage.pendingSearchRequest=rym.request.post("FilterDiscography",{artist_id:RYMartistPage.artist_id,sort:a,searchterm:e,show_appearances:i})):s?($("#filmography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),RYMartistPage.pendingSearchRequest=rym.request.post("FilterFilmDiscography",{artist_id:RYMartistPage.artist_id,sort:a,searchterm:e,show_appearances:i})):RYMartistPage.lastTerm!=e&&(e.length>0&&(i=!0),$("#filmography").html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),RYMartistPage.pendingSearchRequest=rym.request.post("FilterFilmDiscography",{artist_id:RYMartistPage.artist_id,sort:a,searchterm:e,show_appearances:i}))},clearSearch:function(){$("#disco_search").val(""),RYMartistPage.applySearchFilters(!0)},_searchCallback:function(s,e){RYMartistPage.lastTerm=s,RYMartistPage.discoSection=="music"?$("#discography").html(e):RYMartistPage.discoSection=="film"&&$("#filmography").html(e),refreshLazyLoadList()},clearMultiSort:function(){RYMartistPage.tempMultiSort=new Array,$(".ui_sort_selector_direction").removeClass("selected"),console.log("clearing multisort: ")},applyMultiSort:function(){var s=RYMartistPage.tempMultiSort.join(","),e=$("#disco_sort").val();console.log("applying multisort: "+s),!(s.length==0||e==s)&&($("#disco_sort").val(s),RYMartistPage.applySearchFilters(!0))},addMultiSort:function(s,e){$("#ui_sort_selector_multi_"+s+"_"+e).addClass("selected"),RYMartistPage.tempMultiSort.push(s+"."+e),console.log("adding multisort: "+s)},_openIssueCatalogerCallback:function(s,e){$("#issue_cataloger_content_"+s).html(e),$("#issue_cataloger_"+s).show()},openIssueCataloger:function(s){rym.request.post("OpenIssueCataloger",{album_id:s},null,"script"),$("#issue_cataloger_content_"+s).html("Loading..."),$("#issue_cataloger_"+s).show()},collapseIssueCataloger:function(s){$("#issue_cataloger_"+s).hide()},_openFilmCatalogerCallback:function(s,e){$("#film_cataloger_content_"+s).html(e),$("#film_cataloger_"+s).show()},openFilmCataloger:function(s){rym.request.post("OpenFilmCataloger",{film_id:s},null,"script"),$("#film_cataloger_content_"+s).html("Loading..."),$("#film_cataloger_"+s).show()},collapseFilmCataloger:function(s){$("#film_cataloger_"+s).hide()},loadShows:function(s,e){$("#disco_expand_"+e).text("Loading...").css("cursor","inherit"),rym.request.post("LoadMoreShows",{artist_id:s,direction:e},null,"script")},_loadShowsCallback:function(s,e,i){e=="prev"?$("#shows").prepend(i):$("#shows").append(i),$("#no_shows").hide(),$("#disco_expand_"+e).hide()},setWorkGrouping:function(s,e){var i=$("#works"),a=i.outerHeight();i.css("min-height",a+"px"),i.html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),$(".sort_choice").removeClass("selected"),$("#work_grouping_choice_"+e).addClass("selected"),rym.request.post("SetWorkGrouping",{artist_id:s,grouping:e},null,"script")},_setWorkGroupingCallback:function(s){$("#works").html(s)},setCreditsGrouping:function(s,e){var i=$("#release_credits"),a=i.outerHeight();i.css("min-height",a+"px"),i.html('<div class="loading_disco"><i class="fa fa-spinner fa-spin"></i> Loading...</div>').slideDown(200),$(".sort_choice").removeClass("selected"),$("#credit_grouping_choice_"+e).addClass("selected"),rym.request.post("SetCreditsGrouping",{artist_id:s,grouping:e},null,"script")},_setCreditsGroupingCallback:function(s){$("#release_credits").html(s),refreshLazyLoadList()}};
